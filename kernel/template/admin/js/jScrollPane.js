(function(e){e.jScrollPaneCusel={active:[]};e.fn.jScrollPaneCusel=function(t){t=e.extend({},e.fn.jScrollPaneCusel.defaults,t);var n=function(){return false};return this.each(function(){var r=e(this);var i=this.parentNode.offsetWidth;r.css("overflow","hidden");var s=this;if(e(this).parent().is(".jScrollPaneContainer")){var o=t.maintainPosition?r.position().top:0;var u=e(this).parent();var a=i;var f=u.outerHeight();var l=f;e(">.jScrollPaneTrack, >.jScrollArrowUp, >.jScrollArrowDown",u).remove();r.css({top:0})}else{var o=0;this.originalPadding=r.css("paddingTop")+" "+r.css("paddingRight")+" "+r.css("paddingBottom")+" "+r.css("paddingLeft");this.originalSidePaddingTotal=(parseInt(r.css("paddingLeft"))||0)+(parseInt(r.css("paddingRight"))||0);var a=i;var f=r.innerHeight();var l=f;r.wrap("<div class='jScrollPaneContainer'></div>").parent().css({height:f+"px",width:a+"px"});if(!window.navigator.userProfile){var c=parseInt(e(this).parent().css("border-left-width"))+parseInt(e(this).parent().css("border-right-width"));a-=c;e(this).css("width",a+"px").parent().css("width",a+"px")}e(document).bind("emchange",function(e,n,i){r.jScrollPaneCusel(t)})}if(t.reinitialiseOnImageLoad){var h=e.data(s,"jScrollPaneImagesToLoad")||e("img",r);var p=[];if(h.length){h.each(function(n,i){e(this).bind("load",function(){if(e.inArray(n,p)==-1){p.push(i);h=e.grep(h,function(e,t){return e!=i});e.data(s,"jScrollPaneImagesToLoad",h);t.reinitialiseOnImageLoad=false;r.jScrollPaneCusel(t)}}).each(function(e,t){if(this.complete||this.complete===undefined){this.src=this.src}})})}}var d=this.originalSidePaddingTotal;var v={height:"auto",width:a-t.scrollbarWidth-t.scrollbarMargin-d+"px"};if(t.scrollbarOnLeft){v.paddingLeft=t.scrollbarMargin+t.scrollbarWidth+"px"}else{v.paddingRight=t.scrollbarMargin+"px"}r.css(v);var m=r.outerHeight();var g=f/m;if(g<.99){var y=r.parent();y.append(e('<div class="jScrollPaneTrack"></div>').css({width:t.scrollbarWidth+"px"}).append(e('<div class="jScrollPaneDrag"></div>').css({width:t.scrollbarWidth+"px"}).append(e('<div class="jScrollPaneDragTop"></div>').css({width:t.scrollbarWidth+"px"}),e('<div class="jScrollPaneDragBottom"></div>').css({width:t.scrollbarWidth+"px"}))));var b=e(">.jScrollPaneTrack",y);var w=e(">.jScrollPaneTrack .jScrollPaneDrag",y);if(t.showArrows){var E;var S;var x;var T;var N=function(){if(T>4||T%4==0){U(H+S*P)}T++};var C=function(t){e("html").unbind("mouseup",C);E.removeClass("jScrollActiveArrowButton");clearInterval(x)};var k=function(){e("html").bind("mouseup",C);E.addClass("jScrollActiveArrowButton");T=0;N();x=setInterval(N,100)};y.append(e("<div></div>").attr({"class":"jScrollArrowUp"}).css({width:t.scrollbarWidth+"px"}).bind("mousedown",function(){E=e(this);S=-1;k();this.blur();return false}).bind("click",n),e("<div></div>").attr({"class":"jScrollArrowDown"}).css({width:t.scrollbarWidth+"px"}).bind("mousedown",function(){E=e(this);S=1;k();this.blur();return false}).bind("click",n));var L=e(">.jScrollArrowUp",y);var A=e(">.jScrollArrowDown",y);if(t.arrowSize){l=f-t.arrowSize-t.arrowSize;b.css({height:l+"px",top:t.arrowSize+"px"})}else{var O=L.height();t.arrowSize=O;l=f-O-A.height();b.css({height:l+"px",top:O+"px"})}}var M=e(this).css({position:"absolute",overflow:"visible"});var _;var D;var P;var H=0;var B=g*f/2;var j=function(e,t){var n=t=="X"?"Left":"Top";return e["page"+t]||e["client"+t]+(document.documentElement["scroll"+n]||document.body["scroll"+n])||0};var F=function(){return false};var I=function(){nt();_=w.offset(false);_.top-=H;D=l-w[0].offsetHeight;P=2*t.wheelSpeed*D/m};var q=function(t){I();B=j(t,"Y")-H-_.top;e("html").bind("mouseup",R).bind("mousemove",z);if(e.browser.msie){e("html").bind("dragstart",F).bind("selectstart",F)}return false};var R=function(){e("html").unbind("mouseup",R).unbind("mousemove",z);B=g*f/2;if(e.browser.msie){e("html").unbind("dragstart",F).unbind("selectstart",F)}};var U=function(e){e=e<0?0:e>D?D:e;H=e;w.css({top:e+"px"});var n=e/D;M.css({top:(f-m)*n+"px"});r.trigger("scroll");if(t.showArrows){L[e==0?"addClass":"removeClass"]("disabled");A[e==D?"addClass":"removeClass"]("disabled")}};var z=function(e){U(j(e,"Y")-_.top-B)};var W=Math.max(Math.min(g*(f-t.arrowSize*2),t.dragMaxHeight),t.dragMinHeight);w.css({height:W+"px"}).bind("mousedown",q);var X;var V;var J;var K=function(){if(V>8||V%4==0){U(H-(H-J)/2)}V++};var Q=function(){clearInterval(X);e("html").unbind("mouseup",Q).unbind("mousemove",G)};var G=function(e){J=j(e,"Y")-_.top-B};var Y=function(t){I();G(t);V=0;e("html").bind("mouseup",Q).bind("mousemove",G);X=setInterval(K,100);K()};b.bind("mousedown",Y);y.bind("mousewheel",function(e,t){I();nt();var n=H;U(H-t*P);var r=n!=H;return false});var Z;var et;function tt(){var e=(Z-H)/t.animateStep;if(e>1||e<-1){U(H+e)}else{U(Z);nt()}}var nt=function(){if(et){clearInterval(et);delete Z}};var rt=function(n,i){if(typeof n=="string"){$e=e(n,r);if(!$e.length)return;n=$e.offset().top-r.offset().top}y.scrollTop(0);nt();var s=-n/(f-m)*D;if(i||!t.animateTo){U(s)}else{Z=s;et=setInterval(tt,t.animateInterval)}};r[0].scrollTo=rt;r[0].scrollBy=function(e){var t=-parseInt(M.css("top"))||0;rt(t+e)};I();rt(-o,true);e("*",this).bind("focus",function(n){var i=e(this);var s=0;while(i[0]!=r[0]){s+=i.position().top;i=i.offsetParent()}var o=-parseInt(M.css("top"))||0;var u=o+f;var a=s>o&&s<u;if(!a){var l=s-t.scrollbarMargin;if(s>o){l+=e(this).height()+15+t.scrollbarMargin-f}rt(l)}});if(location.hash){rt(location.hash)}e(document).bind("click",function(t){$target=e(t.target);if($target.is("a")){var n=$target.attr("href");if(n.substr(0,1)=="#"){rt(n)}}});e.jScrollPaneCusel.active.push(r[0])}else{r.css({height:f+"px",width:a-this.originalSidePaddingTotal+"px",padding:this.originalPadding});r.parent().unbind("mousewheel")}})};e.fn.jScrollPaneRemoveCusel=function(){e(this).each(function(){$this=e(this);var t=$this.parent();if(t.is(".jScrollPaneContainer")){$this.css({top:"",height:"",width:"",padding:"",overflow:"",position:""});$this.attr("style",$this.data("originalStyleTag"));t.after($this).remove()}})};e.fn.jScrollPaneCusel.defaults={scrollbarWidth:10,scrollbarMargin:5,wheelSpeed:18,showArrows:false,arrowSize:0,animateTo:false,dragMinHeight:1,dragMaxHeight:99999,animateInterval:100,animateStep:3,maintainPosition:true,scrollbarOnLeft:false,reinitialiseOnImageLoad:false};e(window).bind("unload",function(){var t=e.jScrollPaneCusel.active;for(var n=0;n<t.length;n++){t[n].scrollTo=t[n].scrollBy=null}})})(jQuery)